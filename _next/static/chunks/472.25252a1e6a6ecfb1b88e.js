"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{7472:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i=n(5893),o=n(7294),r=n(8216),a=n(5997),l=n(2809),s=n(6841),c=n(6358),u=n(4607),d=function(){function e(){(0,r.Z)(this,e),console.log("Manager_cons")}return(0,a.Z)(e,null,[{key:"initialize",value:function(t,n,i){console.log("Manager_init"),e._width=n,e._height=i,e._scaleRatioX=1,e._scaleRatioY=1,e.app=new s.Application({view:t,resolution:window.devicePixelRatio||1,backgroundColor:12442586,autoDensity:!1,antialias:!0,width:n,height:i}),c.p8.registerPlugin(u.w),u.w.registerPIXI(s),e.app.ticker.stop(),c.p8.ticker.fps(60),c.p8.ticker.add((function(){e.app.ticker.update()})),e.app.ticker.add(e.update),console.log("a_1",e.currentScene),e.ManagerInitSetting()}},{key:"ManagerInitSetting",value:function(){e.app.renderer.plugins.interaction.cursorStyles.Target="url('redTarget.png') 10 10, crosshair";var t=window.navigator.userAgent.toLowerCase();console.log(t);var n=!0;-1!=t.indexOf("edge")?console.log("use Edge"):-1!=t.indexOf("chrome")?console.log("use Google Chrome"):-1!=t.indexOf("safari")?(console.log("use Safari"),n=!1):-1!=t.indexOf("firefox")?console.log("use FireFox"):-1!=t.indexOf("opera")?console.log("use Opera"):(console.log("undefined"),n=!1),n||(s.settings.PREFER_ENV=s.ENV.WEBGL),console.log("ENVIRONMENT",s.settings.PREFER_ENV)}},{key:"resizeToFullscreen",value:function(){console.log("width",window.innerWidth,screen.width,screen.availWidth,document.documentElement.clientWidth),console.log("height",window.innerHeight,screen.height,screen.availHeight,document.documentElement.clientHeight),e._scaleRatioX=screen.availWidth/e.width,e._scaleRatioY=screen.availHeight/e.height,1===e.scaleRatioX&&1===e.scaleRatioY||(e.currentScene.pivot.set(e.width/2,e.height/2),e._width=screen.availWidth,e._height=screen.availHeight,e.app.renderer.resize(e.width,e.height),e.currentScene.scale.set(e.scaleRatioX),e.currentScene.position.set(e.width/2,e.height/2),e.app.render())}},{key:"changeScene",value:function(t){console.log("Manager_change"),console.log("a_2",e.currentScene),e.currentScene&&(console.log("Manager_destroy"),e.app.stage.removeChild(e.currentScene),e.currentScene.destroy()),e.currentScene=t,e.app.stage.addChild(e.currentScene),console.log("a_3",e.currentScene)}},{key:"update",value:function(){e.currentScene&&e.currentScene.update()}},{key:"width",get:function(){return e._width}},{key:"height",get:function(){return e._height}},{key:"wr",get:function(){return e._width/100}},{key:"hr",get:function(){return e._height/100}},{key:"scaleRatioX",get:function(){return e._scaleRatioX}},{key:"scaleRatioY",get:function(){return e._scaleRatioY}}]),e}();(0,l.Z)(d,"app",void 0),(0,l.Z)(d,"currentScene",void 0),(0,l.Z)(d,"_width",void 0),(0,l.Z)(d,"_height",void 0),(0,l.Z)(d,"_scaleRatioX",void 0),(0,l.Z)(d,"_scaleRatioY",void 0);var h=n(7602),f=n(4695),p=n(148),g=n(5002),x=n(2953),v=n(1729),m=n(2292),T=JSON.parse('{"f":["\u753b\u9762\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u3068\u304d\u306f\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u306d\uff01","\u203b\u97f3\u304c\u51fa\u307e\u3059"]}'),w=[{name:"RocknRoll One",url:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap",metadata:{font:{testString:"\n    ".concat(T.f.join(""),"\n    0123456789\n    ABCDEFGHIJKLMNOPQRSTUVWXYZ\n    abcdefghijklmnopqrstuvwxyz\n    .,/`~:;'-_=+!@#$%^&*()~{}[]").replace(/\s/g,"")}}},{name:"highPointSE",url:"SE/highPoint.mp3"},{name:"normalPointSE",url:"SE/normalPoint.mp3"},{name:"missTargetSE",url:"SE/missTarget.mp3"},{name:"lostPointSE",url:"SE/lostPoint.mp3"},{name:"fontT",url:"fontText.json"}];function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,g.Z)(this,n)}}var Z=function(e,t){return Math.random()*(t-e)+e},y=function(e){var t=60-Math.pow(e/60,.8)+Z(0,10);return(t=Math.floor(t))<5&&(t=5),t},k=function(e){return("00"+Math.round(e)).slice(-2)},B=function(e){(0,p.Z)(n,e);var t=S(n);function n(){var e;(0,r.Z)(this,n),e=t.call(this),(0,l.Z)((0,f.Z)(e),"startText",void 0),(0,l.Z)((0,f.Z)(e),"scoreText",void 0),(0,l.Z)((0,f.Z)(e),"lifeBar",void 0),(0,l.Z)((0,f.Z)(e),"targets",void 0),(0,l.Z)((0,f.Z)(e),"target_i",void 0),(0,l.Z)((0,f.Z)(e),"gameNow",void 0),(0,l.Z)((0,f.Z)(e),"tick",void 0),(0,l.Z)((0,f.Z)(e),"limit",void 0),(0,l.Z)((0,f.Z)(e),"score",void 0),(0,l.Z)((0,f.Z)(e),"interval",void 0),(0,l.Z)((0,f.Z)(e),"background",void 0),(0,l.Z)((0,f.Z)(e),"targetContainer",void 0),(0,l.Z)((0,f.Z)(e),"resultScreen",void 0),(0,l.Z)((0,f.Z)(e),"fpsText",void 0),(0,l.Z)((0,f.Z)(e),"timeText",void 0);var i=d.wr,o=d.hr,a=i/10;e.sortableChildren=!0,e.gameNow=!1,e.tick=0,e.limit=100,e.target_i=0,e.score=0,e.interval=y(0),e.interactive=!0,e.cursor="Target",e.background=(new s.Graphics).beginFill(16250613).drawRect(0,0,100*i,100*o).endFill(),e.background.alpha=0,e.background.zIndex=1,e.background.interactive=!0,e.background.on("pointerdown",e.clickScreen,(0,f.Z)(e)),e.addChild(e.background),e.resultScreen=new R,e.resultScreen.zIndex=200,e.resultScreen.alpha=0,e.addChild(e.resultScreen),e.startText=new s.Text("3",{fill:"black",fontSize:96}),e.startText.anchor.set(.5),e.startText.scale.set(a),e.startText.position.set(50*i,50*o),e.addChild(e.startText),e.lifeBar=(new s.Graphics).beginFill(139).drawRect(0,0,100*i,2*o).endFill(),e.lifeBar.position.x=100*-i,e.addChild(e.lifeBar),e.targets=new Array,e.targetContainer=new s.Container;for(var c=0;c<30;c++){var u=(new s.Graphics).beginFill(16775885).drawCircle(0,0,4*i).beginFill(16747520).drawCircle(0,0,1*i).endFill();u.interactive=!0,u.on("pointerdown",e.clickTarget,(0,f.Z)(e)),u.alpha=0,u.visible=!1,e.targetContainer.addChild(u),e.targets.push({Gtarget:u,key:c})}return e.targetContainer.zIndex=10,e.addChild(e.targetContainer),e.scoreText=new s.Text("Score: ".concat(e.score),{fontFamily:"RocknRoll One",fill:"black",fontSize:24}),e.scoreText.scale.set(a),e.scoreText.position.set(2*i,3*o),e.addChild(e.scoreText),e.fpsText=new s.BitmapText(" ",{fontName:"RocknRoll",tint:16711680,fontSize:16}),e.fpsText.scale.set(a),e.fpsText.position.set(90*i,96*o),e.addChild(e.fpsText),e.timeText=new s.BitmapText("00:00",{fontName:"RocknRoll",tint:0,fontSize:72}),e.timeText.alpha=0,e.timeText.zIndex=-1e3,e.timeText.anchor.set(.5,.6),e.timeText.scale.set(a),e.timeText.position.set(50*i,50*o),e.addChild(e.timeText),e.gameLoad(),e}return(0,a.Z)(n,[{key:"gameLoad",value:function(){var e=this;c.p8.to(this.lifeBar,{pixi:{x:0},duration:3}),c.p8.timeline().to(this.startText,{duration:1,onComplete:function(){e.startText.text="2"}}).to(this.startText,{duration:1,onComplete:function(){e.startText.text="1"}}).to(this.startText,{duration:1,onComplete:function(){return e.startGame()}})}},{key:"startGame",value:function(){console.log("gamestart"),this.removeChild(this.startText),this.timeText.alpha=.3,this.startText.destroy(),this.gameNow=!0}},{key:"showTarget",value:function(){var e=this;if(this.gameNow){this.target_i<29?this.target_i++:this.target_i=0;var t=this.targets[this.target_i].Gtarget;t.position.set(d.wr*Z(15,85),d.hr*Z(15,85));var n=Z(0,2*Math.PI),i=Math.cos(n)*d.wr*5,o=Math.sin(n)*d.wr*5,r=c.p8.timeline();t.visible=!0,r.to(t,{pixi:{x:"+="+i,y:"+="+o,alpha:1},duration:1,ease:"Power4.easeOut"}).to(t,{pixi:{x:"+="+i,y:"+="+o,alpha:0},duration:1,ease:"Power4.easeIn",onComplete:function(){e.limit-=8,t.visible=!1,m.eq.play("missTargetSE")}})}}},{key:"clickTarget",value:function(e){console.log("clickTARGET");var t,n,i=e.data.getLocalPosition(e.currentTarget);(t=i.x,n=i.y,Math.sqrt(Math.pow(t,2)+Math.pow(n,2)))<=d.wr?(console.log("1"),m.eq.play("highPointSE"),this.changeScore(21*(75-this.interval))):(console.log("2"),m.eq.play("normalPointSE"),this.changeScore(7*(75-this.interval))),this.limit<=98&&(this.limit+=2),c.p8.killTweensOf(e.currentTarget),e.currentTarget.alpha=0,e.currentTarget.visible=!1}},{key:"clickScreen",value:function(){this.gameNow&&(console.log("clickSCREEN"),m.eq.play("lostPointSE"),this.changeScore(-Math.ceil(.02*this.score)))}},{key:"changeScore",value:function(e){this.score+=e,this.scoreText.text="Score: ".concat(this.score)}},{key:"update",value:function(){if(this.gameNow){var e=c.p8.ticker.deltaRatio();this.tick+=e,this.limit-=e/20;var t=Math.floor(this.tick/60),n=t%60,i=(t-n)/60;this.timeText.text=k(i)+":"+k(n),this.applyCanvas(e),this.limit<=0?this.finishGame(i,n):this.limit<=20&&1===this.scoreText.alpha&&this.hideScore()}}},{key:"hideScore",value:function(){this.scoreText.alpha=.99,c.p8.to(this.scoreText,{pixi:{alpha:0},duration:1})}},{key:"applyCanvas",value:function(e){this.lifeBar.position.x=d.wr*(this.limit-100);var t=60/e;this.fpsText.text="".concat(t.toFixed(3)," fps"),this.createTarget()}},{key:"createTarget",value:function(){this.interval--,this.interval<=0&&(this.showTarget(),this.interval=y(Math.round(this.tick)),console.log(this.interval))}},{key:"finishGame",value:function(e,t){var n=this;console.log("finish"),this.gameNow=!1,this.timeText.alpha=0,this.background.zIndex=150,this.cursor="auto",c.p8.killTweensOf(this.targetContainer.children),this.targetContainer.interactiveChildren=!1,this.resultScreen.timeText.text=k(e)+":"+k(t),this.resultScreen.scoreText.text="Score: ".concat(this.score),this.resultScreen.shareButton.on("pointerdown",(function(){n.resultScreen.twitterShare(e,t,n.score)}),this),c.p8.to(this.resultScreen,{pixi:{alpha:1},duration:3}),c.p8.to(this.background,{pixi:{alpha:.5},duration:3})}}]),n}(s.Container),R=function(e){(0,p.Z)(n,e);var t=S(n);function n(){var e;(0,r.Z)(this,n),e=t.call(this),(0,l.Z)((0,f.Z)(e),"timeText",void 0),(0,l.Z)((0,f.Z)(e),"scoreText",void 0),(0,l.Z)((0,f.Z)(e),"shareButton",void 0),(0,l.Z)((0,f.Z)(e),"returnMenuText",void 0);var i=d.wr,o=d.hr,a=i/10;return e.timeText=new s.Text("00:00",{fill:"blue",fontSize:64}),e.timeText.anchor.set(.5),e.timeText.scale.set(a),e.timeText.position.set(50*i,35*o),e.addChild(e.timeText),e.scoreText=new s.Text("Score: Null",{fill:"red",fontSize:72}),e.scoreText.anchor.set(.5),e.scoreText.scale.set(a),e.scoreText.position.set(50*i,50*o),e.addChild(e.scoreText),e.shareButton=new s.Text("Tweet",{fill:44206,fontSize:28}),e.shareButton.anchor.set(.5),e.shareButton.scale.set(a),e.shareButton.position.set(50*i,60*o),e.shareButton.interactive=!0,e.shareButton.buttonMode=!0,e.addChild(e.shareButton),e.returnMenuText=new s.Text("Return Menu",{fill:"black",fontSize:56}),e.returnMenuText.anchor.set(.5),e.returnMenuText.scale.set(a),e.returnMenuText.position.set(50*i,70*o),e.returnMenuText.interactive=!0,e.returnMenuText.buttonMode=!0,e.returnMenuText.on("pointerdown",(function(){return d.changeScene(new _)}),(0,f.Z)(e)),e.addChild(e.returnMenuText),e}return(0,a.Z)(n,[{key:"twitterShare",value:function(e,t,n){window.open("http://twitter.com/share?text=Time-".concat(e,":").concat(t,"%0aScore-").concat(n,"$url=https://husky21st.github.io/AimLaaab/"))}}]),n}(s.Container);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,g.Z)(this,n)}}var _=function(e){(0,p.Z)(n,e);var t=C(n);function n(){var e;(0,r.Z)(this,n),e=t.call(this),(0,l.Z)((0,f.Z)(e),"menuText",void 0),(0,l.Z)((0,f.Z)(e),"Button1Text",void 0),(0,l.Z)((0,f.Z)(e),"Button2Text",void 0),(0,l.Z)((0,f.Z)(e),"Start1Button",void 0),(0,l.Z)((0,f.Z)(e),"Start2Button",void 0);var i=d.wr,o=d.hr,a=i/20;return e.menuText=new s.BitmapText("AimLaaab",{fontName:"RocknRoll",tint:0,fontSize:96}),e.menuText.anchor.set(.5),e.menuText.position.set(50*i,30*o),e.menuText.scale.set(a),e.addChild(e.menuText),e.Start1Button=(new s.Graphics).lineStyle(2,16316671,1).beginFill(16761035).drawRoundedRect(30*i,65*o,40*i,10*o,i).endFill(),e.Start1Button.interactive=!0,e.Start1Button.buttonMode=!0,e.Start1Button.on("pointertap",(function(){e.interactive=!0,e.cursor="Target",d.changeScene(new B)}),(0,f.Z)(e)),e.addChild(e.Start1Button),e.Start2Button=(new s.Graphics).lineStyle(2,16316671,1).beginFill(9109643).drawRoundedRect(30*i,80*o,40*i,10*o,i).endFill(),e.Start2Button.alpha=.1,e.addChild(e.Start2Button),e.Button1Text=new s.BitmapText("Start Game",{fontName:"RocknRoll",tint:0,fontSize:38}),e.Button1Text.anchor.set(.5),e.Button1Text.position.set(50*i,70*o),e.Button1Text.scale.set(a),e.addChild(e.Button1Text),e.Button2Text=new s.BitmapText("Coming soon...",{fontName:"RocknRoll",tint:0,fontSize:38}),e.Button2Text.anchor.set(.5),e.Button2Text.position.set(50*i,85*o),e.Button2Text.scale.set(a),e.Button2Text.alpha=.1,e.addChild(e.Button2Text),e}return(0,a.Z)(n,[{key:"update",value:function(){}}]),n}(s.Container);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,g.Z)(this,n)}}var F=function(e){(0,p.Z)(n,e);var t=b(n);function n(){var e;(0,r.Z)(this,n),e=t.call(this),(0,l.Z)((0,f.Z)(e),"loaderBar",void 0),(0,l.Z)((0,f.Z)(e),"loaderBarBoder",void 0),(0,l.Z)((0,f.Z)(e),"loaderBarFill",void 0),(0,l.Z)((0,f.Z)(e),"text",void 0),console.log("Loader_cons"),console.log("resolution",window.devicePixelRatio);var i=d.wr,o=d.hr,a=i/40,c=.8*d.width;return e.loaderBarFill=new s.Graphics,e.loaderBarFill.beginFill(10027263,1),e.loaderBarFill.drawRect(0,0,c,5*o),e.loaderBarFill.endFill(),e.loaderBarFill.scale.x=0,e.loaderBarBoder=new s.Graphics,e.loaderBarBoder.lineStyle(10,0,1),e.loaderBarBoder.drawRect(0,0,c,5*o),e.loaderBar=new s.Container,e.loaderBar.addChild(e.loaderBarFill),e.loaderBar.addChild(e.loaderBarBoder),e.loaderBar.position.x=(d.width-e.loaderBar.width)/2,e.loaderBar.position.y=(d.height-e.loaderBar.height)/2,e.addChild(e.loaderBar),e.text=new s.Text("\u753b\u9762\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u3068\u304d\u306f\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u306d\uff01",{fontFamily:"RocknRoll One",fill:0,fontSize:64}),e.text.anchor.set(.5),e.text.position.set(d.width/2,d.height/2),e.text.scale.set(2*a),e.text.alpha=0,e.addChild(e.text),s.Loader.registerPlugin(v.r),s.Loader.shared.add(w),s.Loader.shared.onProgress.add(e.downloadProgress,(0,f.Z)(e)),s.Loader.shared.onComplete.once(e.gameLoaded,(0,f.Z)(e)),s.Loader.shared.load(),e}return(0,a.Z)(n,[{key:"downloadProgress",value:function(e){console.log("Loader_downloadProgress");var t=e.progress/100;this.loaderBarFill.scale.x=t}},{key:"gameLoaded",value:function(){var e=this;this.initSetting(),c.p8.timeline().to(this.loaderBar,{pixi:{alpha:0},duration:1}).to(this.text,{pixi:{alpha:1},duration:1,yoyo:!0,repeat:1,onComplete:function(){e.text.text="\u203b\u97f3\u304c\u51fa\u307e\u3059"}}).to(this.text,{pixi:{alpha:1},duration:1,yoyo:!0,repeat:1,onComplete:function(){return d.changeScene(new _)}})}},{key:"initSetting",value:function(){var e;this.setAssetsVolume(),(e=console).log.apply(e,(0,h.Z)(s.Loader.shared.resources.fontT.data.text)),s.BitmapFont.from("RocknRoll",{fontFamily:"RocknRoll One",fill:"#ffffff",fontSize:96},{resolution:4,chars:[["0","9"],["a","z"],["A","Z"],".,/`~:;'-_=+!@#$%^&*()~{}[] "].concat((0,h.Z)(s.Loader.shared.resources.fontT.data.text))})}},{key:"setAssetsVolume",value:function(){m.eq.volumeAll=.5}},{key:"update",value:function(){console.log("Loader_update")}}]),n}(s.Container),M=function(){var e=document.body,t=(0,o.useRef)(null),n=e.requestFullscreen;return(0,o.useEffect)((function(){var e=t.current;if(e){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);console.log("screenSize",n,i),d.initialize(e,n,i);var o=new F;d.changeScene(o)}}),[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("canvas",{ref:t,style:{width:"100%",height:"100%",objectFit:"contain"}}),n&&(0,i.jsx)("button",{onClick:function(){var e=t.current;e&&(e.requestFullscreen(),d.resizeToFullscreen())},className:"material-icons",style:{position:"fixed",top:"1rem",right:"1rem",zIndex:99999,appearance:"none",background:"transparent",border:"none",cursor:"pointer"},children:"fullscreen"})]})}}}]);